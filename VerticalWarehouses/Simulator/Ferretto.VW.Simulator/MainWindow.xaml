<Window x:Class="Ferretto.VW.Simulator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converter="clr-namespace:Ferretto.VW.App.Controls.Converters;assembly=Ferretto.VW.App.Controls"
        xmlns:custom="clr-namespace:Ferretto.VW.App.Controls.Controls;assembly=Ferretto.VW.App.Controls"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Ferretto.VW.Simulator"
        xmlns:res="clr-namespace:Ferretto.VW.Simulator.Resources;assembly=Ferretto.VW.Simulator.Resources"
        Title="Simulator"
        Width="1024"
        Height="660"
        Icon="Resources/LogoFerrettoGroup.png"
        ResizeMode="CanMinimize"
        WindowStartupLocation="CenterScreen"
        WindowStyle="SingleBorderWindow"
        mc:Ignorable="d">

    <Window.Resources>
        <converter:BooleanNegationConverter x:Key="BNC" />
        <converter:BoolToVisibilityConverter x:Key="BTVC" />
        <converter:BoolToVisibilityConverter x:Key="BTVIC" Invert="True" />
    </Window.Resources>

    <Grid Background="{DynamicResource VWAPP_BACKGROUND}"
          IsEnabled="{Binding IsBusy, Converter={StaticResource BNC}}">

        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid Margin="15,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Grid Grid.Row="0"
                  Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Image Name="imgLogo"
                       Grid.Column="0"
                       Width="50"
                       VerticalAlignment="Center"
                       RenderOptions.BitmapScalingMode="HighQuality"
                       RenderTransformOrigin="0.5, 0.5"
                       Source="{DynamicResource Ferretto_Small_Logo}">
                    <Image.RenderTransform>
                        <ScaleTransform x:Name="AnimatedScaleTransform" ScaleX="1" />
                    </Image.RenderTransform>
                    <Image.Triggers>
                        <EventTrigger RoutedEvent="Mouse.MouseDown">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames AccelerationRatio="0.4"
                                                                   DecelerationRatio="0.6"
                                                                   Storyboard.TargetName="AnimatedScaleTransform"
                                                                   Storyboard.TargetProperty="(ScaleTransform.ScaleX)">
                                        <LinearDoubleKeyFrame KeyTime="00:00:00.0"
                                                              Value="1" />
                                        <LinearDoubleKeyFrame KeyTime="00:00:00.5"
                                                              Value="0" />
                                        <LinearDoubleKeyFrame KeyTime="00:00:01.0"
                                                              Value="-1" />
                                        <LinearDoubleKeyFrame KeyTime="00:00:01.5"
                                                              Value="0" />
                                        <LinearDoubleKeyFrame KeyTime="00:00:02.0"
                                                              Value="1" />
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Image.Triggers>
                </Image>

                <TextBlock Grid.Column="1"
                           Margin="15,10,15,10"
                           VerticalAlignment="Center"
                           Style="{StaticResource VWAPP_SplashScreenTitleTextBlockStyle}"
                           Text="VW Simulator" />
            </Grid>

            <Button Grid.Row="0"
                    Grid.Column="2"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Command="{Binding ToggleThemeCommand}">
                <Button.Content>
                    <StackPanel Orientation="Horizontal">
                        <custom:VWIcon Height="36"
                                       Margin="10"
                                       ColorizeBrush="{DynamicResource VWAPP_ActionButton_Foreground_Normal}"
                                       Source="pack://application:,,,/Ferretto.VW.Simulator;Component/Icons/theme_dark.png"
                                       Visibility="{Binding IsDarkThemeActive, Converter={StaticResource BTVC}}" />

                        <custom:VWIcon Height="36"
                                       Margin="10"
                                       ColorizeBrush="{DynamicResource VWAPP_ActionButton_Foreground_Normal}"
                                       Source="pack://application:,,,/Ferretto.VW.Simulator;Component/Icons/theme_light.png"
                                       Visibility="{Binding IsDarkThemeActive, Converter={StaticResource BTVIC}}" />

                        <TextBlock Margin="0,0,10,0"
                                   VerticalAlignment="Center">
                            <TextBlock.Style>
                                <Style>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsDarkThemeActive}"
                                                     Value="True">
                                            <Setter Property="TextBlock.Text" Value="Tema Scuro" />
                                            <Setter Property="TextBlock.Foreground" Value="White" />
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsDarkThemeActive}"
                                                     Value="False">
                                            <Setter Property="TextBlock.Text" Value="Tema Chiaro" />
                                            <Setter Property="TextBlock.Foreground" Value="Black" />
                                        </DataTrigger>

                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </Button.Content>
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="Transparent" />
                        <Setter Property="BorderBrush" Value="Transparent" />
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="Transparent" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>

                </Button.Style>
            </Button>

            <Button Grid.Row="1"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Command="{Binding StartSimulatorCommand}"
                    Content="Start simulator"
                    IsEnabled="{Binding InverterService.NotIsStartedSimulator}"
                    Template="{StaticResource VWAPP_ActionButton_ControlTemplate}" />

            <StackPanel Grid.Row="1"
                        Grid.Column="1"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                <custom:CustomSensorControl Grid.Row="1"
                                            Grid.Column="1"
                                            Margin="0,0,10,0"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            LabelText="Simulation Started"
                                            SensorState="{Binding InverterService.IsStartedSimulator}"
                                            Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                <custom:CustomSensorControl Grid.Row="1"
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            LabelText="Sicurezza"
                                            SensorState="{Binding EmergencyEndRun, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            Style="{StaticResource VWAPP_CustomSensorControlStyle}" />
            </StackPanel>
            <!--  IoDrive  -->
            <StackPanel Grid.Row="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        HorizontalAlignment="Stretch"
                        Orientation="Horizontal">
                <Border Width="250"
                        Height="250"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <!--  {x:Static res:InstallationApp.LuPresentInBay}  -->
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <custom:CustomSensorControl Grid.Row="0"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="LuPresentInBay"
                                                    SensorState="{Binding LuPresentInBay1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="1"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="HeightControlCheck1"
                                                    SensorState="{Binding HeightControlCheckBay1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="2"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="GateSensorABay1"
                                                    SensorState="{Binding ShutterSensorABay1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="3"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="GateSensorBBay1"
                                                    SensorState="{Binding ShutterSensorBBay1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                    </Grid>
                </Border>
                <Border Width="250"
                        Height="250"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <custom:CustomSensorControl Grid.Row="0"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="LuPresentInBay2"
                                                    SensorState="{Binding LuPresentInBay2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="1"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="HeightControlCheck2"
                                                    SensorState="{Binding HeightControlCheckBay2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="2"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="GateSensorABay2"
                                                    SensorState="{Binding ShutterSensorABay2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="3"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="GateSensorBBay2"
                                                    SensorState="{Binding ShutterSensorBBay2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                    </Grid>
                </Border>
                <Border Width="250"
                        Height="250"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <custom:CustomSensorControl Grid.Row="0"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="LuPresentInBay3"
                                                    SensorState="{Binding LuPresentInBay3, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="1"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="HeightControlCheck3"
                                                    SensorState="{Binding HeightControlCheckBay3, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="2"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="GateSensorABay3"
                                                    SensorState="{Binding ShutterSensorABay3, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                        <custom:CustomSensorControl Grid.Row="3"
                                                    Margin="15,15,15,0"
                                                    HorizontalAlignment="Left"
                                                    VerticalAlignment="Top"
                                                    LabelText="GateSensorBBay3"
                                                    SensorState="{Binding ShutterSensorBBay3, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                    Style="{StaticResource VWAPP_CustomSensorControlStyle}" />

                    </Grid>
                </Border>
            </StackPanel>

            <!--  Inverter  -->
            <StackPanel Grid.Row="3"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        HorizontalAlignment="Stretch"
                        Orientation="Horizontal">
                <Border Width="150"
                        Height="150"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Label HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="White">
                        INVERTER 1
                    </Label>
                </Border>
                <Border Width="150"
                        Height="150"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Label HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="White">
                        INVERTER 2
                    </Label>
                </Border>
                <Border Width="150"
                        Height="150"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Label HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="White">
                        INVERTER 3
                    </Label>
                </Border>
                <Border Width="150"
                        Height="150"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Label HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="White">
                        INVERTER 4
                    </Label>
                </Border>
                <Border Width="150"
                        Height="150"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Label HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="White">
                        INVERTER 5
                    </Label>
                </Border>
                <Border Width="150"
                        Height="150"
                        Margin="0,15,15,15"
                        BorderBrush="Gray"
                        BorderThickness="1">
                    <Label HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Foreground="White">
                        INVERTER 6
                    </Label>
                </Border>
            </StackPanel>

        </Grid>

        <TextBlock Grid.Row="1"
                   Margin="15,0,15,15"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Center"
                   Style="{StaticResource VWAPP_ViewErrorTextBlockStyle}"
                   Text="{Binding ErrorMessage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                   TextWrapping="WrapWithOverflow" />

    </Grid>
</Window>
