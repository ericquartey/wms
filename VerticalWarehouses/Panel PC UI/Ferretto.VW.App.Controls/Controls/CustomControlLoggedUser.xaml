<ctrls:PpcControl x:Class="Ferretto.VW.App.Controls.Controls.CustomControlLoggedUser"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:controls="clr-namespace:Ferretto.VW.App.Controls.Controls"
                  xmlns:ctrls="clr-namespace:Ferretto.VW.App.Controls"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:res="clr-namespace:Ferretto.VW.App.Resources;assembly=Ferretto.VW.App.Resources"
                  PresentationType="Logged"
                  mc:Ignorable="d">

    <Grid Name="LayoutRoot">
        <controls:PpcButton x:Name="ButtonRoot"
                            Height="60"
                            Background="Transparent"
                            Command="{Binding ExecuteCommand}"
                            Content="{Binding UserName}"
                            ImageSource="/Ferretto.VW.App.Controls;Component/Assets/baseline_account_circle_black_18dp.png"
                            IsActive="{Binding IsPopupOpen}" />

        <Popup Width="{Binding ElementName=ButtonRoot, Path=ActualWidth}"
               Margin="0,20"
               VerticalAlignment="Top"
               AllowsTransparency="True"
               IsOpen="{Binding IsPopupOpen}"
               PlacementTarget="{Binding ElementName=ButtonRoot}">
            <StackPanel>

                <controls:PpcButton Width="{Binding ElementName=ButtonRoot, Path=ActualWidth}"
                                    Command="{Binding ToggleThemeCommand}"
                                    Content="Cambia Tema" />

                <controls:PpcButton Width="{Binding ElementName=ButtonRoot, Path=ActualWidth}"
                                    Command="{Binding LogOutCommand}"
                                    Content="{x:Static res:InstallationApp.LogOff}" />
            </StackPanel>
        </Popup>
    </Grid>
</ctrls:PpcControl>
