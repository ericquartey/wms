<ctrls:PpcControl x:Class="Ferretto.VW.App.Controls.Controls.CustomControlLoggedUser"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:controls="clr-namespace:Ferretto.VW.App.Controls.Controls"
                  xmlns:ctrls="clr-namespace:Ferretto.VW.App.Controls"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:res="clr-namespace:Ferretto.VW.App.Resources;assembly=Ferretto.VW.App.Resources"
                  PresentationType="Logged"
                  mc:Ignorable="d">

    <Grid Name="LayoutRoot">
        <controls:PpcButton x:Name="ButtonRoot"
                            Height="60"
                            VerticalContentAlignment="Center"
                            Background="Transparent"
                            Command="{Binding ExecuteCommand}"
                            FontSize="{DynamicResource PpcButtonFontSize}"
                            Foreground="{DynamicResource VWAPP_CustomControlLoggedUser_Foreground_Normal}"
                            IsActive="{Binding IsPopupOpen}">

            <StackPanel Orientation="Horizontal">
                <TextBlock Margin="10,0,10,0"
                           Text="{Binding UserName}" />
                <controls:PpcIcon Height="24"
                                  ColorizeBrush="{DynamicResource PpcButtonForeground}"
                                  Source="/Ferretto.VW.App.Controls;Component/Assets/baseline_account_circle_black_18dp.png" />
            </StackPanel>

        </controls:PpcButton>

        <Popup Width="{Binding ElementName=ButtonRoot, Path=ActualWidth}"
               Margin="0,20"
               VerticalAlignment="Top"
               AllowsTransparency="True"
               IsOpen="{Binding IsPopupOpen}"
               PlacementTarget="{Binding ElementName=ButtonRoot}">
            <StackPanel Background="{DynamicResource VWAPP_BACKGROUND}">

                <controls:PpcButton Width="{Binding ElementName=ButtonRoot, Path=ActualWidth}"
                                    Height="60"
                                    Command="{Binding ToggleThemeCommand}"
                                    Content="Theme"
                                    FontSize="{DynamicResource VWAPP_CustomControlLoggedUser_FontSize_Normal}"
                                    Foreground="{DynamicResource VWAPP_CustomControlLoggedUser_Foreground_Normal}" />

                <controls:PpcButton Width="{Binding ElementName=ButtonRoot, Path=ActualWidth}"
                                    Height="60"
                                    Command="{Binding LogOutCommand}"
                                    Content="{x:Static res:InstallationApp.LogOff}"
                                    FontSize="{DynamicResource VWAPP_CustomControlLoggedUser_FontSize_Normal}"
                                    Foreground="{DynamicResource VWAPP_CustomControlLoggedUser_Foreground_Normal}" />
            </StackPanel>
        </Popup>
    </Grid>
</ctrls:PpcControl>
