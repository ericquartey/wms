<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Ferretto.VW.App.Controls.Controls"
                    xmlns:local="clr-namespace:Ferretto.VW.App.Controls.Styles">

    <Style x:Key="{x:Type controls:PpcProgressBar}"
           TargetType="{x:Type ProgressBar}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:PpcProgressBar}">
                    <Grid Name="TemplateRoot"
                          SnapsToDevicePixels="True">
                        <Rectangle Fill="{TemplateBinding Background}"
                                   RadiusX="2"
                                   RadiusY="2" />

                        <Rectangle Name="PART_Track"
                                   Margin="1,1,1,1" />

                        <Decorator Name="PART_Indicator"
                                   Margin="1,1,1,1"
                                   HorizontalAlignment="Left">
                            <Grid Name="Foreground">
                                <Rectangle Name="Indicator">
                                    <Rectangle.Fill>
                                        <LinearGradientBrush MappingMode="Absolute" SpreadMethod="Repeat" StartPoint="0,0" EndPoint="10,10">
                                            <GradientStop Offset="0" Color="{Binding Color1.Color, RelativeSource={RelativeSource TemplatedParent}}" />
                                            <GradientStop Offset="0.5" Color="{Binding Color1.Color, RelativeSource={RelativeSource TemplatedParent}}" />
                                            <GradientStop Offset="0.5" Color="{Binding Color2.Color, RelativeSource={RelativeSource TemplatedParent}}" />
                                            <GradientStop Offset="1" Color="{Binding Color2.Color, RelativeSource={RelativeSource TemplatedParent}}" />
                                        </LinearGradientBrush>
                                    </Rectangle.Fill>
                                </Rectangle>
                                <Grid Name="Animation"
                                      ClipToBounds="True">
                                    <Border Name="PART_GlowRect"
                                            Width="100"
                                            Margin="0,0,0,0"
                                            HorizontalAlignment="Left" />
                                </Grid>
                                <Grid Name="Overlay" />
                            </Grid>
                        </Decorator>

                        <Border BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}" />
                    </Grid>


                    <ControlTemplate.Triggers>
                        <Trigger Property="Orientation" Value="Vertical">
                            <Setter TargetName="TemplateRoot" Property="LayoutTransform">
                                <Setter.Value>
                                    <RotateTransform Angle="-90" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
