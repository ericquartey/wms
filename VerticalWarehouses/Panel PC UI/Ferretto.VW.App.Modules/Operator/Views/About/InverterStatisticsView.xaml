<ctrls:View x:Class="Ferretto.VW.App.Modules.Operator.Views.InverterStatisticsView"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:controls="clr-namespace:Ferretto.VW.App.Controls.Controls;assembly=Ferretto.VW.App.Controls"
            xmlns:converters="clr-namespace:Ferretto.VW.App.Modules.Operator.Converters"
            xmlns:ctrls="clr-namespace:Ferretto.VW.App.Controls;assembly=Ferretto.VW.App.Controls"
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
            xmlns:icons="http://metro.mahapps.com/winfx/xaml/iconpacks"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            xmlns:res="clr-namespace:Ferretto.VW.App.Resources;assembly=Ferretto.VW.App.Resources"
            xmlns:prism="http://prismlibrary.com/"
            xmlns:Resources="clr-namespace:Ferretto.VW.App.Resources;assembly=Ferretto.VW.App.Resources"
            d:DesignHeight="450"
            d:DesignWidth="800"
            prism:ViewModelLocator.AutoWireViewModel="True"
            mc:Ignorable="d">

    <Grid Margin="15,0,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top"
                   Style="{StaticResource VWAPP_ViewTitleTextBlockStyle}"
                   Text="{Resources:Loc InstallationApp.InverterStatistics}" />

        <Border Grid.Row="1"
                Margin="0,0,15,15"
                BorderBrush="{DynamicResource PpcBorderBrush}"
                BorderThickness="{DynamicResource PpcBorderThickness}"
                CornerRadius="2">
            <DataGrid Grid.Row="2"
                      Grid.ColumnSpan="2"
                      AutoGenerateColumns="False"
                      Margin="0"
                      ItemsSource="{Binding TotalStatistics.InverterStatistics, UpdateSourceTrigger=PropertyChanged}"
                      HorizontalAlignment="Stretch"
                      Width="auto"
                      Height="auto"
                      Background="{DynamicResource VWAPP_BACKGROUND}"
                      BorderThickness="0"
                      CanUserReorderColumns="False"
                      CanUserResizeColumns="False"
                      CanUserResizeRows="False"
                      CanUserSortColumns="True"
                      FontSize="{StaticResource FontSize_High}"
                      HeadersVisibility="Column"
                      HorizontalGridLinesBrush="{DynamicResource PpcButtonBorderBrush}"
                      HorizontalScrollBarVisibility="Auto"
                      IsReadOnly="True"
                      IsSynchronizedWithCurrentItem="True"
                      RowHeight="35"
                      SelectedItem="{Binding SelectedLoadingUnit}"
                      SelectionMode="Single"
                      VerticalGridLinesBrush="{DynamicResource PpcButtonBorderBrush}"
                      VerticalScrollBarVisibility="Auto">
                <DataGrid.Template>
                    <ControlTemplate TargetType="{x:Type DataGrid}">
                        <Border Padding="{TemplateBinding Padding}"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                SnapsToDevicePixels="True">
                            <ScrollViewer x:Name="DG_ScrollViewer"
                                          Focusable="false">
                                <ScrollViewer.Template>
                                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="*" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>
                                            <Button Width="{Binding CellsPanelHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
                                                    Command="{x:Static DataGrid.SelectAllCommand}"
                                                    Focusable="false"
                                                    Style="{DynamicResource {ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle,
                                                                          TypeInTargetAssembly={x:Type DataGrid}}}"
                                                    Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
                                            <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter"
                                                                            Grid.Column="1"
                                                                            Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
                                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                                                    Grid.Row="1"
                                                                    Grid.ColumnSpan="2"
                                                                    CanContentScroll="{TemplateBinding CanContentScroll}" />
                                            <ScrollBar x:Name="PART_VerticalScrollBar"
                                                       Grid.Row="1"
                                                       Grid.Column="2"
                                                       ContextMenuService.IsEnabled="False"
                                                       Maximum="{TemplateBinding ScrollableHeight}"
                                                       Orientation="Vertical"
                                                       Style="{DynamicResource MyScrollBar}"
                                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                                       Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                            <Grid Grid.Row="2"
                                                  Grid.Column="1">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>
                                                <ScrollBar x:Name="PART_HorizontalScrollBar"
                                                           Grid.Column="1"
                                                           ContextMenuService.IsEnabled="False"
                                                           Maximum="{TemplateBinding ScrollableWidth}"
                                                           Orientation="Horizontal"
                                                           Style="{DynamicResource MyScrollBar}"
                                                           ViewportSize="{TemplateBinding ViewportWidth}"
                                                           Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                                           Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
                                            </Grid>
                                        </Grid>
                                    </ControlTemplate>
                                </ScrollViewer.Template>
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </DataGrid.Template>
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="DataGridColumnHeader">
                                    <Border BorderBrush="{DynamicResource PpcBorderBrush}"
                                            BorderThickness="0,0,0,1"
                                            CornerRadius="2">
                                        <Grid Name="HedearGrid">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="Auto" />
                                            </Grid.ColumnDefinitions>
                                            <ContentPresenter Grid.Column="0"
                                                              Margin="0,0,0,0"
                                                              HorizontalAlignment="Center"
                                                              VerticalAlignment="Center" />
                                            <Path x:Name="SortArrow"
                                                  Grid.Column="1"
                                                  Width="8"
                                                  Height="6"
                                                  Margin="0,0,10,0"
                                                  HorizontalAlignment="Right"
                                                  VerticalAlignment="Center"
                                                  Data="M0,0 L1,0 0.5,1 z"
                                                  Fill="{DynamicResource VWAPP_ViewBodyTextBlock_Foreground_Normal}"
                                                  RenderTransformOrigin="0.5,0.4"
                                                  Stretch="Fill" />
                                        </Grid>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="SortDirection"
                                                 Value="Ascending">
                                            <Setter TargetName="SortArrow"
                                                    Property="Visibility"
                                                    Value="Visible" />
                                            <Setter TargetName="SortArrow"
                                                    Property="RenderTransform">
                                                <Setter.Value>
                                                    <RotateTransform Angle="180"
                                                                     CenterX="0"
                                                                     CenterY="0" />
                                                </Setter.Value>
                                            </Setter>
                                        </Trigger>
                                        <Trigger Property="SortDirection"
                                                 Value="Descending">
                                            <Setter TargetName="SortArrow"
                                                    Property="Visibility"
                                                    Value="Visible" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Height"
                                Value="40" />
                        <Setter Property="HorizontalContentAlignment"
                                Value="Center" />
                        <Setter Property="Background"
                                Value="{DynamicResource VWAPP_BACKGROUND}" />
                        <Setter Property="Foreground"
                                Value="{DynamicResource VWAPP_ViewBodyTextBlock_Foreground_Normal}" />
                        <Setter Property="BorderBrush"
                                Value="{DynamicResource PpcButtonBorderBrush}" />
                    </Style>
                </DataGrid.ColumnHeaderStyle>
                <DataGrid.Style>
                    <Style TargetType="DataGrid">
                        <Setter Property="Background"
                                Value="{DynamicResource VWAPP_BACKGROUND}" />
                        <Setter Property="FontFamily"
                                Value="HelveticaNeue-LightCond" />
                    </Style>
                </DataGrid.Style>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Style.Resources>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                             Color="{StaticResource ColorFerrettoMediumGray}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                                             Color="{StaticResource ColorFerrettoMediumGray}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}"
                                             Color="{StaticResource ColorFerrettoPureWhite}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}"
                                             Color="{StaticResource ColorFerrettoPureWhite}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}"
                                             Color="{StaticResource ColorFerrettoMediumGray}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}"
                                             Color="{StaticResource ColorFerrettoPureWhite}" />
                        </Style.Resources>
                        <Setter Property="BorderThickness"
                                Value="1,0,0,0" />
                        <Setter Property="HorizontalContentAlignment"
                                Value="Center" />
                        <Setter Property="BorderBrush"
                                Value="{DynamicResource PpcButtonBorderBrush}" />
                        <Setter Property="Foreground"
                                Value="{DynamicResource VWAPP_ViewBodyTextBlock_Foreground_Normal}" />
                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="{x:Type DataGridRow}">
                        <Style.Resources>
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                                             Color="{StaticResource ColorFerrettoMediumGray}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                                             Color="{StaticResource ColorFerrettoMediumGray}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}"
                                             Color="{StaticResource ColorFerrettoPureWhite}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}"
                                             Color="{StaticResource ColorFerrettoPureWhite}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}"
                                             Color="{StaticResource ColorFerrettoMediumGray}" />
                            <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}"
                                             Color="{StaticResource ColorFerrettoPureWhite}" />
                        </Style.Resources>
                        <Setter Property="FontSize"
                                Value="14" />
                        <Setter Property="Background"
                                Value="{DynamicResource VWAPP_BACKGROUND}" />
                        <Setter Property="Foreground"
                                Value="{DynamicResource VWAPP_ViewBodyTextBlock_Foreground_Normal}" />
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Columns>
                    <DataGridTextColumn Width="0.65*"
                                        Binding="{Binding DateTime, StringFormat=dd-MM-yyyy  HH:mm}"
                                        Header="{Resources:Loc InstallationApp.DateTimeMenuTitle}"
                                        SortDirection="Ascending"
                                        SortMemberPath="DateTime">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="BorderThickness"
                                        Value="1,0,0,0" />
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource PpcButtonBorderBrush}" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment"
                                        Value="Center" />
                                <Setter Property="VerticalAlignment"
                                        Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Width="*"
                                        Binding="{Binding AverageActivePower}"
                                        Header="{Resources:Loc InstallationApp.AverageActivePower}"
                                        SortDirection="Ascending"
                                        SortMemberPath="AverageActivePower">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="BorderThickness"
                                        Value="1,0,0,0" />
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource PpcButtonBorderBrush}" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment"
                                        Value="Center" />
                                <Setter Property="VerticalAlignment"
                                        Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Width="*"
                                        Binding="{Binding AverageRMSCurrent}"
                                        Header="{Resources:Loc InstallationApp.AverageRMSCurrent}"
                                        SortDirection="Ascending"
                                        SortMemberPath="AverageRMSCurrent">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="BorderThickness"
                                        Value="1,0,0,0" />
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource PpcButtonBorderBrush}" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment"
                                        Value="Center" />
                                <Setter Property="VerticalAlignment"
                                        Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Width="*"
                                        Binding="{Binding PeakHeatSinkTemperature}"
                                        Header="{Resources:Loc InstallationApp.PeakHeatSinkTemperature}"
                                        SortDirection="Ascending"
                                        SortMemberPath="PeakHeatSinkTemperature">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="BorderThickness"
                                        Value="1,0,0,0" />
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource PpcButtonBorderBrush}" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment"
                                        Value="Center" />
                                <Setter Property="VerticalAlignment"
                                        Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTextColumn Width="*"
                                        Binding="{Binding PeakInsideTemperature}"
                                        Header="{Resources:Loc InstallationApp.PeakInsideTemperature}"
                                        SortDirection="Ascending"
                                        SortMemberPath="PeakInsideTemperature">
                        <DataGridTextColumn.CellStyle>
                            <Style TargetType="DataGridCell">
                                <Setter Property="BorderThickness"
                                        Value="1,0,0,0" />
                                <Setter Property="BorderBrush"
                                        Value="{DynamicResource PpcButtonBorderBrush}" />
                            </Style>
                        </DataGridTextColumn.CellStyle>
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="HorizontalAlignment"
                                        Value="Center" />
                                <Setter Property="VerticalAlignment"
                                        Value="Center" />
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</ctrls:View>
