<wms:WmsView x:Class="Ferretto.WMS.Modules.MasterData.CompartmentTypesToItemStepView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:wms="clr-namespace:Ferretto.WMS.App.Controls;assembly=Ferretto.WMS.App.Controls"
             xmlns:res="clr-namespace:Ferretto.Common.Resources;assembly=Ferretto.Common.Resources"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             d:DesignHeight="450"
             d:DesignWidth="800"
             mc:Ignorable="d">
    <Grid
        IsEnabled="{Binding IsBusy, Converter={StaticResource BNC}}">
        <GroupBox Header="{Binding Title}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="10" />
                    <RowDefinition Height="50" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="0.7*"/>
                    <ColumnDefinition Width="0.3*"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Row="1"
                           Grid.ColumnSpan="2"
                           HorizontalAlignment="Left"
                           Text="{x:Static res:MasterData.ChooseExistingTypesToAssociateCurrentItemAndMaximumCapacity}" />

                <TextBlock HorizontalAlignment="Left"
                           Grid.Row="2"
                           Text="{x:Static res:MasterData.NoUnassociateItemCompartmentTypesAvailable}"
                           Visibility="{Binding Path=HasUnassociatedItemCompartmentTypes, Converter={StaticResource BTVIC}}" />
                
                <wms:WmsGridControl
                            Visibility="{Binding Path=HasUnassociatedItemCompartmentTypes, Converter={StaticResource BTVC}}"
                            Grid.Row="2"
                            MaxWidth="2000"
                            MaxHeight="2000"
                            ItemsSource="{Binding UnassociateItemCompartmentTypesDataSource}"
                            SelectedBusinessObject="{Binding SelectedItemCompartmentType, Mode=TwoWay}">
                    <dxg:GridControl.View>
                        <dxg:TableView EditorShowMode="MouseDownFocused" />
                    </dxg:GridControl.View>
                    <wms:WmsGridControl.Columns>
                        <dxg:GridColumn Width="70">
                            <dxg:GridColumn.DisplayTemplate>
                                <ControlTemplate>
                                    <dxe:CheckEdit EditMode="InplaceActive" IsChecked="{Binding Path=Row.IsActive, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" />
                                </ControlTemplate>
                            </dxg:GridColumn.DisplayTemplate>
                        </dxg:GridColumn>
                        <dxg:GridColumn Width="200*"
                                        Header="MaxCapacity">
                            <dxg:GridColumn.DisplayTemplate>
                                <ControlTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>
                                        <wms:SpinEdit
                                            Height="{DynamicResource InputControlHeight}"
                                            Grid.Row="1"
                                            Validation.ErrorTemplate="{DynamicResource ValidationErrorTemplateSpinEditOnGridControlStyle}"                                            
                                                      HorizontalAlignment="Stretch"                                                      
                                                      EditValue="{Binding Path=Row.MaxCapacity, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"                                                  
                                                      Style="{DynamicResource SpinEditDecimalStyle}" />
                                    </Grid>
                                </ControlTemplate>
                            </dxg:GridColumn.DisplayTemplate>
                        </dxg:GridColumn>
                        <dxg:GridColumn Width="120*"
                                        FieldName="Width">
                            <dxg:GridColumn.EditSettings>
                                <dxe:TextEditSettings HorizontalContentAlignment="Right" DisplayFormat="{x:Static res:General.CompartmentTypeDimensionFormat}" />
                            </dxg:GridColumn.EditSettings>
                        </dxg:GridColumn>
                        <dxg:GridColumn Width="120*"
                                        FieldName="Height">
                            <dxg:GridColumn.EditSettings>
                                <dxe:TextEditSettings HorizontalContentAlignment="Right" DisplayFormat="{x:Static res:General.CompartmentTypeDimensionFormat}" />
                            </dxg:GridColumn.EditSettings>
                        </dxg:GridColumn>
                        <dxg:GridColumn Width="150*"
                                        FieldName="EmptyCompartmentsCount">
                            <dxg:GridColumn.EditSettings>
                                <dxe:TextEditSettings HorizontalContentAlignment="Right" />
                            </dxg:GridColumn.EditSettings>
                        </dxg:GridColumn>
                        <dxg:GridColumn Width="150*"
                                        FieldName="CompartmentsCount">
                            <dxg:GridColumn.EditSettings>
                                <dxe:TextEditSettings HorizontalContentAlignment="Right" />
                            </dxg:GridColumn.EditSettings>
                        </dxg:GridColumn>
                    </wms:WmsGridControl.Columns>

                </wms:WmsGridControl>
                                   
            </Grid>
        </GroupBox>
    </Grid>
</wms:WmsView>
