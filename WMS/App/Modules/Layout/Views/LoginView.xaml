<wms:WmsDialogView x:Class="Ferretto.WMS.Modules.Layout.LoginView"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                   xmlns:res="clr-namespace:Ferretto.Common.Resources;assembly=Ferretto.Common.Resources"
                   xmlns:wms="clr-namespace:Ferretto.WMS.App.Controls;assembly=Ferretto.WMS.App.Controls"
                   Title="{x:Static res:DesktopApp.Application_Title}"
                   Width="450"
                   d:DesignHeight="600"
                   d:DesignWidth="700"
                   FocusedStart="UsernameTextBox"
                   Mode="DialogPopup"
                   ResizeMode="NoResize"
                   SizeToContent="Height"
                   mc:Ignorable="d">

    <Grid IsEnabled="{Binding IsEnabled}">
        <Grid.Background>
            <ImageBrush ImageSource="pack://application:,,,/Ferretto.WMS.App.Themes;component/Images/splash.png"
                        Opacity="0.3"
                        Stretch="UniformToFill" />
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="20" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="20" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="60" />
            <ColumnDefinition Width="200" />
        </Grid.ColumnDefinitions>

        <Image Grid.Row="1"
               Width="134"
               Height="140"
               Margin="25,0,0,0"
               HorizontalAlignment="Left"
               Focusable="False"
               Source="pack://application:,,,/Ferretto.WMS.App.Themes;component/Images/FGLogo_narrow.png" />

        <StackPanel Grid.Row="1"
                    Grid.Column="2"
                    Margin="20,0,0,0"
                    HorizontalAlignment="Stretch"
                    Orientation="Vertical"
                    IsEnabled="{Binding IsBusy, Converter={StaticResource BNC}}">

            <TextBlock Focusable="False"
                       FontSize="16"
                       FontWeight="Bold"
                       Text="{x:Static res:Layout.UserLogin}" />

            <wms:TextBox Name="UsernameTextBox"
                         wms:ShowTitle.Show="True"
                         AutomationProperties.AutomationId="UsernameTextBox"
                         EditValue="{Binding User.Login, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         MaxLength="20" />
            <wms:PasswordBox wms:ShowTitle.Show="True"
                             AutomationProperties.AutomationId="PasswordTextBox"
                             EditValue="{Binding User.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             MaxLength="20" />
        </StackPanel>

        <TextBlock Grid.Row="3"
                   Grid.Column="0"
                   Margin="5,0,0,0"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Center"
                   Style="{DynamicResource TextBlockErrorMessageStyle}"
                   Text="{Binding ValidationError}" />

        <wms:BusyIndicator Grid.Row="3"
                           Grid.Column="2"
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           BusyHorizontalAlignment="Center"
                           BusyVerticalAlignment="Top"
                           IsBusy="{Binding IsBusy}"
                           ShowMode="CircleMin">
            <wms:ActionBar Name="LoginAB"
                           HorizontalContentAlignment="Right"
                           Background="Transparent"
                           Style="{DynamicResource ActionBarNotCustomizable}">
                <wms:ActionBarItem AutomationProperties.AutomationId="LoginButton"
                                   Command="{Binding LoginCommand, Delay=25}"
                                   Content="{Binding LoginCheck}"
                                   CustomGlyphSize="24,24"
                                   Glyph="{Binding Status}"
                                   GlyphSize="Small" />
            </wms:ActionBar>
        </wms:BusyIndicator>
    </Grid>

</wms:WmsDialogView>
