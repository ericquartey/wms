<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Ferretto.WMS.App.Controls;assembly=Ferretto.WMS.App.Controls"
                    xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
                    xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                    xmlns:dxgt="http://schemas.devexpress.com/winfx/2008/xaml/grid/themekeys"
                    xmlns:res="clr-namespace:Ferretto.Common.Resources;assembly=Ferretto.Common.Resources"
                    xmlns:themes="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">

    <ControlTemplate x:Key="LookUpEditValidationErrorTemplateStyle">
        <StackPanel Orientation="Horizontal">
            <Grid>
                <AdornedElementPlaceholder x:Name="adorner"
                                           MaxHeight="44"
                                           Margin="0,0,0,0"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Top" />
                <Border HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        BorderBrush="{DynamicResource ErrorMessageBackgroundColor}"
                        BorderThickness="1"
                        CornerRadius="0.1">
                    <Grid>
                        <Polygon x:Name="toolTipCorner"
                                 Margin="-1"
                                 HorizontalAlignment="Right"
                                 VerticalAlignment="Top"
                                 Fill="{DynamicResource ErrorMessageBackgroundColor}"
                                 Grid.ZIndex="2"
                                 IsHitTestVisible="True"
                                 Points="9,9 9,0 0,0" />
                        <Polyline Margin="-1"
                                  HorizontalAlignment="Right"
                                  VerticalAlignment="Top"
                                  Grid.ZIndex="3"
                                  IsHitTestVisible="True"
                                  Points="10,10 0,0"
                                  Stroke="White"
                                  StrokeEndLineCap="Round"
                                  StrokeStartLineCap="Round"
                                  StrokeThickness="1.5" />
                    </Grid>
                </Border>
            </Grid>
        </StackPanel>
    </ControlTemplate>

    <ControlTemplate x:Key="{dxgt:LookUpEditThemeKey ResourceKey=PopupContentTemplate}"
                     TargetType="{x:Type ContentControl}">
        <dxg:GridControl x:Name="PART_GridControl"
                         ShowBorder="False" />
    </ControlTemplate>

    <DataTemplate x:Key="LookUpEditCustomButtonTemplate">
        <Button x:Name="PART_Item">
            <Button.Template>
                <ControlTemplate>
                    <Border Background="Transparent">
                        <controls:WmsIcon x:Name="Glyph"
                                          Width="18"
                                          ColorizeBrush="{DynamicResource CommonSecondaryMedium}"
                                          SymbolName="DropDown" />
                    </Border>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </DataTemplate>

    <Style x:Shared="False"
           BasedOn="{StaticResource {themes:DefaultStyleThemeKey Type=dxg:LookUpEdit,
                                                                 ThemeName=Office2016White}}"
           TargetType="controls:LookUpEdit">
        <Setter Property="NullText" Value="{x:Static res:General.SelectValue}" />
        <Setter Property="DisplayMember" Value="Description" />
        <Setter Property="ValueMember" Value="Id" />
        <Setter Property="AllowDefaultButton" Value="False" />
        <Setter Property="AutoPopulateColumns" Value="False" />
        <Setter Property="AllowRejectUnknownValues" Value="True" />
        <Setter Property="InvalidValueBehavior" Value="AllowLeaveEditor" />
        <Setter Property="CausesValidation" Value="False" />
        <Setter Property="ClearSelectionOnBackspace" Value="True" />
        <Setter Property="AssignNullValueOnClearingEditText" Value="True" />
        <Setter Property="FilterCondition" Value="Contains" />
        <Setter Property="FindMode" Value="Always" />
        <Setter Property="ImmediatePopup" Value="True" />
        <Setter Property="IncrementalFiltering" Value="True" />
        <Setter Property="IsPopupAutoWidth" Value="False" />
        <Setter Property="ShowSizeGrip" Value="True" />
        <Setter Property="ValidateOnEnterKeyPressed" Value="False" />
        <Setter Property="ValidateOnTextInput" Value="False" />
        <Setter Property="Validation.ErrorTemplate" Value="{DynamicResource LookUpEditValidationErrorTemplateStyle}" />
        <Setter Property="Buttons">
            <Setter.Value>
                <dxe:ButtonInfoCollection>
                    <dxe:ButtonInfo IsDefaultButton="True"
                                    Template="{StaticResource LookUpEditCustomButtonTemplate}" />
                </dxe:ButtonInfoCollection>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
