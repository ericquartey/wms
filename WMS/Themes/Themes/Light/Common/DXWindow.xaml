<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:dxc="http://schemas.devexpress.com/winfx/2008/xaml/core"
                    xmlns:dxt="http://schemas.devexpress.com/winfx/2008/xaml/core/themekeys">


    <DataTemplate x:Key="{dxt:FloatingContainerThemeKey ThemeName=Office2016White, ResourceKey=FloatingContainerCaptionTemplate}">
        <Grid x:Name="Root">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <dxc:FloatingContainerHeaderPanel Grid.Column="1">
                <TextBlock x:Name="PART_Text"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           FontWeight="Normal"
                           Foreground="{DynamicResource OnCommonSecondaryMedium}"
                           IsHitTestVisible="False"
                           Text="{Binding Path=(dx:FloatingContainer.FloatingContainer).Caption, RelativeSource={RelativeSource AncestorType=ContentPresenter}}" />
            </dxc:FloatingContainerHeaderPanel>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="{dxt:FloatingContainerThemeKey ThemeName=Office2016White, ResourceKey=FloatingContainerTemplate}">
        <Grid Background="{DynamicResource CommonSecondaryMedium}"
              SnapsToDevicePixels="True">
            <Border x:Name="FloatingContainerBorder"
                    BorderBrush="{DynamicResource CommonSecondaryDark}"
                    BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <Thumb x:Name="PART_DragWidget"
                           Grid.Row="0"
                           Template="{DynamicResource {dxt:FloatingContainerThemeKey ThemeName=Office2016White,
                                                                                     ResourceKey=FloatingContainerDragWidgetTemplate}}" />
                    <Border x:Name="FloatingContainerHeader"
                            Grid.Row="0">
                        <Grid Margin="8,8,8,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ContentPresenter x:Name="PART_CaptionContentPresenter"
                                              Grid.Column="0"
                                              ContentTemplate="{DynamicResource {dxt:FloatingContainerThemeKey IsVisibleInBlend=True,
                                                                                                               ThemeName=Office2016White,
                                                                                                               ResourceKey=FloatingContainerCaptionTemplate}}" />
                            <ItemsControl x:Name="ButtonContainer"
                                          Grid.Column="1"
                                          dxc:HeaderItemControl.CloseTemplateProvider="{DynamicResource {dxt:DXWindowThemeKey ResourceKey=HeaderItemControlCloseTemplateProvider}}"
                                          dxc:HeaderItemControl.CommonTemplateProvider="{DynamicResource {dxt:DXWindowThemeKey ResourceKey=HeaderItemControlCommonTemplateProvider}}"
                                          Style="{DynamicResource {dxt:DXTabbedWindowThemeKey ResourceKey=ButtonContainerStyle}}"
                                          UseLayoutRounding="True">

                                <dxc:ThemedWindowHeaderItemsControl x:Name="PART_HeaderCustomItems"
                                                                    Style="{DynamicResource {dxt:DXTabbedWindowThemeKey ResourceKey=ControlContainerStyle}}" />

                                <dxc:HeaderItemControl x:Name="PART_Help"
                                                       Foreground="{DynamicResource OnCommonSecondaryMedium}">
                                    <Image Width="18"
                                           Height="18"
                                           VerticalAlignment="Center"
                                           Source="pack://application:,,,/Ferretto.WMS.Themes;component/Icons/Material/action/ic_help_outline_white_18dp.png" />
                                </dxc:HeaderItemControl>

                                <dxc:HeaderItemControl x:Name="PART_Minimize"
                                                       Foreground="{DynamicResource OnCommonSecondaryMedium}"
                                                       Style="{DynamicResource {dxt:FloatingContainerThemeKey ResourceKey=FloatingContainerHeaderButtonStyle}}" />
                                <dxc:HeaderItemControl x:Name="PART_Restore"
                                                       Foreground="{DynamicResource OnCommonSecondaryMedium}"
                                                       Style="{DynamicResource {dxt:FloatingContainerThemeKey ResourceKey=FloatingContainerHeaderButtonStyle}}"
                                                       Visibility="{Binding Path=(dx:FloatingContainer.IsMaximized), Converter={dx:BooleanToVisibilityConverter Invert=False}, RelativeSource={RelativeSource Self}}" />
                                <dxc:HeaderItemControl x:Name="PART_Maximize"
                                                       Foreground="{DynamicResource OnCommonSecondaryMedium}"
                                                       Style="{DynamicResource {dxt:FloatingContainerThemeKey ResourceKey=FloatingContainerHeaderButtonStyle}}"
                                                       Visibility="{Binding Path=(dx:FloatingContainer.IsMaximized), Converter={dx:BooleanToVisibilityConverter Invert=True}, RelativeSource={RelativeSource Self}}" />
                                <dxc:HeaderItemControl x:Name="PART_CloseButton"
                                                       Foreground="{DynamicResource OnCommonSecondaryMedium}"
                                                       Style="{DynamicResource {dxt:FloatingContainerThemeKey ResourceKey=FloatingContainerHeaderCloseButtonStyle}}" />
                            </ItemsControl>

                        </Grid>
                    </Border>
                    <Border x:Name="FloatingContainerBody"
                            Grid.Row="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <dxc:BackgroundPanel x:Name="PART_ContainerContent"
                                                 Margin="0,8,0,0"
                                                 Content="{Binding}" />
                            <StackPanel x:Name="PART_StatusPanel"
                                        Grid.Row="0"
                                        VerticalAlignment="Bottom"
                                        Visibility="Collapsed">
                                <Thumb x:Name="PART_SizeGrip"
                                       HorizontalAlignment="Right"
                                       VerticalAlignment="Bottom"
                                       Cursor="SizeNWSE"
                                       Template="{DynamicResource {dxt:FloatingContainerThemeKey IsVisibleInBlend=True,
                                                                                                 ThemeName=Office2016White,
                                                                                                 ResourceKey=FloatingContainerSizeGripTemplate}}" />
                            </StackPanel>
                            <Rectangle Grid.Row="1"
                                       Height="10"
                                       HorizontalAlignment="Stretch"
                                       Fill="{DynamicResource CommonSecondaryMedium}" />
                        </Grid>
                    </Border>
                </Grid>
            </Border>
            <Control x:Name="PART_ResizeFrame"
                     Focusable="False"
                     Template="{DynamicResource {dxt:FloatingContainerThemeKey ThemeName=Office2016White,
                                                                               ResourceKey=FloatingContainerResizeFrame}}" />
        </Grid>
        <DataTemplate.Triggers>
            <DataTrigger Binding="{Binding Path=(dx:FloatingContainer.IsActive)}"
                         Value="False">
                <Setter TargetName="PART_CaptionContentPresenter" Property="Opacity" Value="0.5" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=(dx:FloatingContainer.FloatingContainer).AllowSizing, RelativeSource={RelativeSource Self}}"
                         Value="false">
                <Setter TargetName="PART_StatusPanel" Property="Visibility" Value="Collapsed" />
                <Setter TargetName="PART_ResizeFrame" Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Path=(dx:FloatingContainer.IsMaximized)}"
                         Value="True" />
        </DataTemplate.Triggers>
    </DataTemplate>

</ResourceDictionary>
