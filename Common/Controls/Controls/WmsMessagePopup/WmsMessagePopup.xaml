<wms:WmsDialogView x:Class="Ferretto.WMS.App.Controls.WmsMessagePopup"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                   xmlns:wms="clr-namespace:Ferretto.WMS.App.Controls"
                   xmlns:res="clr-namespace:Ferretto.Common.Resources;assembly=Ferretto.Common.Resources"                   
                   Width="500"
                   Height="600"
                   d:DesignHeight="500"
                   d:DesignWidth="500"
                   AllowsTransparency="True"
                   Mode="DialogError"                   
                   Opacity="1"
                   ResizeMode="NoResize"
                   WindowStyle="None"
                   Margin="0,20,0,20"             
                   mc:Ignorable="d">

    <wms:WmsDialogView.Resources>

        <SolidColorBrush x:Key="Disconnected"  Color="Black" />
        <Color x:Key="TryConnect">Black</Color>
        <Color x:Key="Connected">#FF16640A</Color>

        <Storyboard x:Key="sbShowErrorConnection" RepeatBehavior="Forever">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="thunderPath">
                <EasingDoubleKeyFrame KeyTime="0:0:0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="1"/>
                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="0"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>

        <Storyboard x:Key="sbShowConnected">
            <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)">
                <EasingColorKeyFrame KeyTime="0" Value="{StaticResource TryConnect}"/>
                <EasingColorKeyFrame KeyTime="0:0:0.5" Value="{StaticResource TryConnect}"/>
                <EasingColorKeyFrame KeyTime="0:0:1" Value="{StaticResource Connected}"/>
                <EasingColorKeyFrame KeyTime="0:0:1.5" Value="{StaticResource Connected}"/>
            </ColorAnimationUsingKeyFrames>
        </Storyboard>
    </wms:WmsDialogView.Resources>

    <Grid Margin="5,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="*"
                           MinHeight="200" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.25*"/>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="0.50*"/>
                <ColumnDefinition Width="0.25*"/>
            </Grid.ColumnDefinitions>
        
        <TextBlock Margin="50 0 0 0"
                   VerticalAlignment="Center"
                   Grid.Column="0"
                   Grid.ColumnSpan="4"
                   x:Name="TitleTB"
                   Text="{Binding Title}" FontSize="20"/>
        
        <Canvas x:Name="appbar_disconnect"
                        Width="210"
                        Height="150"
                        Grid.Row="1"
                        Grid.Column="1">
            <Path x:Name="plugPath"
                          Width="150"
                          Height="150"
                          Canvas.Left="30"                          
                          Stretch="Fill"
                          Fill="{StaticResource Disconnected}"
                          Data="F1 M 27.6073,29.8464L 20.4825,22.7216C 19.8641,22.1033 19.8641,21.1008 20.4825,20.4825C 21.1008,19.8641 22.1033,19.8641 22.7216,20.4825L 29.8464,27.6073C 34.1877,24.3526 40.3735,24.6993 44.3217,28.6475L 28.6475,44.3217C 24.6993,40.3735 24.3526,34.1877 27.6073,29.8464 Z M 47.7483,32.0742C 51.6965,36.0223 52.0433,42.2082 48.7885,46.5494L 55.5175,53.2784C 56.1358,53.8967 56.1358,54.8992 55.5175,55.5175C 54.8992,56.1359 53.8967,56.1359 53.2783,55.5175L 46.5494,48.7886C 42.2081,52.0433 36.0223,51.6965 32.0741,47.7484L 35.4329,44.3896L 32.6339,41.5906C 31.7064,40.6631 31.7064,39.1594 32.6339,38.2319C 33.5614,37.3044 35.0652,37.3044 35.9927,38.2319L 38.7916,41.0308L 41.0308,38.7917L 38.2319,35.9927C 37.3044,35.0652 37.3044,33.5614 38.2319,32.634C 39.1594,31.7065 40.6631,31.7065 41.5906,32.6339L 44.3896,35.4329L 47.7483,32.0742 Z "
                          RenderTransformOrigin="0.5,0.5">
                <Path.RenderTransform>
                    <TransformGroup>
                        <ScaleTransform/>
                        <SkewTransform/>
                        <RotateTransform Angle="-45"/>
                        <TranslateTransform/>
                    </TransformGroup>
                </Path.RenderTransform>
            </Path>
            <Canvas Name="ThunDerCanvas" Visibility="{Binding IsError, Converter={StaticResource BTVC}}">
                <Path x:Name="thunderPath"                              
                              Width="100" 
                              Height="140" 
                              Canvas.Left="60"
                              Canvas.Top="12" 
                              Stretch="Fill"
                              Fill="{DynamicResource CommonPrimary}" 
                              Data="F1 M 29.0937,46.5104L 33.8437,46.5104L 24.3437,55.4167L 28.1437,48.2917L 23.75,48.2917L 28.5,41.1667L 34.4375,41.1667 Z" RenderTransformOrigin="0.5,0.5">
                </Path>
            </Canvas>
        </Canvas>

        <TextBlock Grid.Row="1"
                   Grid.Column="2"
                   Margin="50 0 0 0" x:Name="MessageTB"
                   TextWrapping="Wrap"
                   Text="{Binding Message}"
                   FontSize="28" FontWeight="SemiBold" VerticalAlignment="Center" />

        <wms:ActionBar Grid.Column="0"
                       Grid.ColumnSpan="4"
                       Grid.Row="2"
                       Margin="5"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Bottom"
                       Style="{DynamicResource ActionBarNotCustomizable}">
            <wms:ActionBarItem Command="{Binding ShutDownCommand}"
                               Content="{x:Static res:General.ShutDownApp}"
                               CustomGlyphSize="24,24"
                               Glyph="pack://application:,,,/Ferretto.WMS.App.Themes;component/icons/material/navigation/1x_web/ic_close_black_24dp.png"
                               GlyphSize="Custom" />
        </wms:ActionBar>

    </Grid>

</wms:WmsDialogView>

