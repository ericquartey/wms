<UserControl x:Class="Ferretto.Common.Controls.WPF.TrayControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:ctrls="clr-namespace:Ferretto.Common.Controls.WPF"
             mc:Ignorable="d"
             x:Name="WmsTray">

    <Grid Name="RootTrayGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"  MinHeight="{Binding MinBorderHeight, ElementName=CanvasListBoxControl}"   />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" MinWidth="{Binding MinBorderWidth, ElementName=CanvasListBoxControl}"    />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*"   />
        </Grid.ColumnDefinitions>

        <Label x:Name="UnitMetric"               
               Padding="1 0 0 0"
               Height="{DynamicResource TrayRulerSize}"          
               Width="{DynamicResource TrayRulerSize}"                              
               HorizontalAlignment="Stretch"
               VerticalAlignment="Stretch"  
               VerticalContentAlignment="Center"
               HorizontalContentAlignment="Center"
               Content="{Binding RulerInfo}"               
               Foreground="{Binding RulerForeground}"
               FontWeight="Bold"
               FontFamily="{DynamicResource TrayFont}"
               Visibility="{Binding ShowRuler, Converter={StaticResource BTVC}}"/>
    
        <ctrls:RulerControl x:Name="HorizontalRulerControl"
                               Grid.Column="1"
                               Foreground="{Binding RulerForeground}"
                               ForegroundText="{Binding RulerForeground}"
                               FontSize="{Binding RulerFontSize}"
                               DimensionWidth="{Binding DimensionWidth}"
                               DimensionHeight="{Binding DimensionHeight}"
                               ShowInfo="{Binding ShowInfo}"
                               ShowMark="{Binding ShowMark}"
                               ShowLittleMark="{Binding ShowLittleMark}"
                               ShowMiddleMark="{Binding ShowMiddleMark}"                                                              
                               Step="{Binding RulerStep}"
                               Height="{DynamicResource TrayRulerSize}"
                               Width="{Binding TrayWidth, ElementName=CanvasListBoxControl}"
                               TrayWidth="{Binding TrayWidth, ElementName=CanvasListBoxControl}"
                               TrayHeight="{Binding TrayHeight, ElementName=CanvasListBoxControl}"                               
                               FontFamily="{DynamicResource TrayFont}"                             
                               HorizontalAlignment="Left"                               
                               VerticalAlignment="Top"                               
                               Orientation="Horizontal"
                               OriginHorizontal="{Binding OriginHorizontal}"
                               OriginVertical="{Binding OriginVertical}"
                               HideAllMarkers="{Binding ShowRuler, Converter={StaticResource BNC}}"/>
        <ctrls:RulerControl x:Name="VerticalRulerControl"                                                                                       
                               Grid.Row="1"                               
                               Foreground="{Binding RulerForeground}"
                               ForegroundText="{Binding RulerForeground}"
                               FontSize="{Binding RulerFontSize}"
                               DimensionWidth="{Binding DimensionWidth}"
                               DimensionHeight="{Binding DimensionHeight}"
                               ShowInfo="{Binding ShowInfo}"
                               ShowMark="{Binding ShowMark}"
                               ShowLittleMark="{Binding ShowLittleMark}"
                               ShowMiddleMark="{Binding ShowMiddleMark}"                                                              
                               Step="{Binding RulerStep}"                               
                               TrayWidth="{Binding TrayWidth, ElementName=CanvasListBoxControl}"
                               TrayHeight="{Binding TrayHeight, ElementName=CanvasListBoxControl}"
                               FontFamily="{DynamicResource TrayFont}"                               
                               Width="{DynamicResource TrayRulerSize}"                               
                               Height="{Binding TrayHeight, ElementName=CanvasListBoxControl}"                               
                               VerticalAlignment="Top"                               
                               Orientation="Vertical"
                               HorizontalAlignment="Left"
                               OriginHorizontal="{Binding OriginHorizontal}"
                               OriginVertical="{Binding OriginVertical}"
                               HideAllMarkers="{Binding ShowRuler, Converter={StaticResource BNC}}"/>
        <ctrls:WmsCanvasListBoxControl x:Name="CanvasListBoxControl"
                                       Grid.Row="1"
                                       Grid.Column="1"                                                                                 
                                       IsEnabled="{Binding IsEnabled}"
                                       RulerSize="{DynamicResource TrayRulerSize}"
                                       DimensionWidth="{Binding DimensionWidth}"
                                       DimensionHeight="{Binding DimensionHeight}"
                                       DefaultCompartmentColor="{Binding DefaultCompartmentColor}"
                                       Step="{Binding RulerStep}"                                       
                                       IsReadOnly="{Binding IsReadOnly}"
                                       IsCompartmentSelectable="{Binding IsCompartmentSelectable}"
                                       HorizontalAlignment="Left"
                                       VerticalAlignment="Top"
                                       OriginHorizontal="{Binding OriginHorizontal}"
                                       OriginVertical="{Binding OriginVertical}"
                                       SelectedColorFilterFunc="{Binding SelectedColorFilterFunc}"
                                       ItemContainerStyle="{DynamicResource CanvasItemStyle}"
                                       ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                       ScrollViewer.VerticalScrollBarVisibility="Disabled"
                                       ShowRuler="{Binding ShowRuler}"
                                       Compartments="{Binding Compartments}"
                                       SelectedCompartment="{Binding SelectedItem, Mode=TwoWay}"                                       
                                       ShowBackground="{Binding ShowBackground}"
                                       GridLinesColor="{Binding GridLinesColor}"
                                       Style="{DynamicResource CanvasListBox}" />

        <ctrls:RulerControl x:Name="BorderRulerControl"
                               Grid.Row="2"
                               Grid.Column="1"
                               Foreground="{Binding RulerForeground}"
                               DimensionWidth="{Binding DimensionWidth}"
                               DimensionHeight="{Binding DimensionHeight}"                                                           
                               Height="{DynamicResource TrayRulerSize}"
                               Width="{Binding TrayWidth, ElementName=CanvasListBoxControl}"
                               TrayWidth="{Binding TrayWidth, ElementName=CanvasListBoxControl}"
                               TrayHeight="{Binding TrayHeight, ElementName=CanvasListBoxControl}"                                                        
                               HorizontalAlignment="Left"                               
                               VerticalAlignment="Top"                               
                               Orientation="Horizontal"
                               OriginHorizontal="{Binding OriginHorizontal}"
                               OriginVertical="{Binding OriginVertical}"
                               HideAllMarkers="True"/>
        <ctrls:RulerControl x:Name="BorderRightRulerControl"                                                                                       
                               Grid.Row="1"
                               Grid.Column="2"
                               Foreground="{Binding RulerForeground}"                             
                               DimensionWidth="{Binding DimensionWidth}"
                               DimensionHeight="{Binding DimensionHeight}"                                                                                     
                               TrayWidth="{Binding TrayWidth, ElementName=CanvasListBoxControl}"
                               TrayHeight="{Binding TrayHeight, ElementName=CanvasListBoxControl}"                                                           
                               Height="{Binding TrayHeight, ElementName=CanvasListBoxControl}"                               
                               VerticalAlignment="Top"                               
                               Orientation="Vertical"
                               HorizontalAlignment="Left"
                               OriginHorizontal="{Binding OriginHorizontal}"
                               OriginVertical="{Binding OriginVertical}"
                               HideAllMarkers="True"/>
    </Grid>
</UserControl>
